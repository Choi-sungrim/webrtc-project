logging:
  logs:
    default:
      level: INFO

storage:
  module: file_system
  root: /data

apps:
  tls:
    certificates:
      load_files:
        - certificate: /etc/livekit/certs/livekit.host.com+1.pem
          key: /etc/livekit/certs/livekit.host.com+1-key.pem

  layer4:
    servers:
      main:
        listen:
          - ":443"

        routes:
          # ✅ TURN (TLS 5349)
          - match:
              - tls:
                  sni:
                    - "livekit.host-turn.com"
            handle:
              - handler: tls
                connection_policies:
                  - alpn: ["turn"]
              - handler: proxy
                upstreams:
                  - dial: ["livekit:5349"]

          # ✅ LiveKit WebRTC / WSS / HTTPS
          - match:
              - tls:
                  sni:
                    - "livekit.host.com"
            handle:
              - handler: tls
                connection_policies:
                  - alpn: ["http/1.1"]
              - handler: proxy
                upstreams:
                  - dial: ["livekit:7880"]
